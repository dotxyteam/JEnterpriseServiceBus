<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>PlanDiagramPalette.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">j-enterprise-service-bus (java8) (Dec 1, 2025 10:13:41 AM)</a> &gt; <a href="../../index.html" class="el_group">j-enterprise-service-bus</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">com.otk.jesb.ui</a> &gt; <span class="el_source">PlanDiagramPalette.java</span></div><h1>PlanDiagramPalette.java</h1><pre class="source lang-java linenums">package com.otk.jesb.ui;

import java.awt.BorderLayout;
import javax.swing.BoxLayout;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;

import com.otk.jesb.solution.Plan;

import xy.reflect.ui.control.FieldControlDataProxy;
import xy.reflect.ui.control.FieldControlInputProxy;
import xy.reflect.ui.control.IAdvancedFieldControl;
import xy.reflect.ui.control.IFieldControlData;
import xy.reflect.ui.control.IFieldControlInput;
import xy.reflect.ui.control.swing.renderer.FieldControlPlaceHolder;
import xy.reflect.ui.control.swing.renderer.Form;
import xy.reflect.ui.control.swing.renderer.SwingRenderer;
import xy.reflect.ui.control.swing.util.ControlPanel;
import xy.reflect.ui.control.swing.util.SwingRendererUtils;
import xy.reflect.ui.info.ValidationSession;
import xy.reflect.ui.info.menu.MenuModel;

public class PlanDiagramPalette extends ControlPanel implements IAdvancedFieldControl {

	private static final long serialVersionUID = 1L;

	private SwingRenderer swingRenderer;
	private IFieldControlInput input;

<span class="fc" id="L30">	public PlanDiagramPalette(SwingRenderer swingRenderer, IFieldControlInput input) {</span>
<span class="fc" id="L31">		this.swingRenderer = swingRenderer;</span>
<span class="fc" id="L32">		this.input = input;</span>
<span class="fc" id="L33">		setLayout(new BorderLayout());</span>
<span class="fc" id="L34">		refreshUI(true);</span>
<span class="fc" id="L35">	}</span>

	protected PlanDiagram getDiagram() {
<span class="fc" id="L38">		Form planEditor = getPlanEditor();</span>
<span class="fc bfc" id="L39" title="All 2 branches covered.">		if (planEditor == null) {</span>
<span class="fc" id="L40">			return null;</span>
		}
<span class="fc" id="L42">		FieldControlPlaceHolder fielControlPlaceHolder = SwingRendererUtils</span>
<span class="fc" id="L43">				.findDescendantFieldControlPlaceHolder(planEditor, &quot;diagram&quot;, swingRenderer);</span>
<span class="pc bpc" id="L44" title="1 of 2 branches missed.">		if (fielControlPlaceHolder == null) {</span>
<span class="nc" id="L45">			return null;</span>
		}
<span class="fc" id="L47">		return (PlanDiagram) fielControlPlaceHolder.getFieldControl();</span>
	}

	protected Form getPlanEditor() {
<span class="fc" id="L51">		return SwingRendererUtils.findAncestorFormOfType(this, Plan.class.getName(), swingRenderer);</span>
	}

	@Override
	public boolean showsCaption() {
<span class="fc" id="L56">		return false;</span>
	}

	@Override
	public boolean refreshUI(boolean refreshStructure) {
<span class="fc" id="L61">		removeAll();</span>
<span class="fc bfc" id="L62" title="All 2 branches covered.">		if (getDiagram() != null) {</span>
<span class="fc" id="L63">			add(BorderLayout.CENTER,</span>
<span class="fc" id="L64">					getDiagram().createActionPalette(JTabbedPane.TOP, JTabbedPane.RIGHT, BoxLayout.Y_AXIS));</span>
<span class="fc" id="L65">			SwingRendererUtils.handleComponentSizeChange(PlanDiagramPalette.this);</span>
<span class="fc" id="L66">		} else {</span>
<span class="fc" id="L67">			add(BorderLayout.CENTER, new PlanDiagram(swingRenderer, new FieldControlInputProxy(input) {</span>
				@Override
				public IFieldControlData getControlData() {
<span class="fc" id="L70">					return new FieldControlDataProxy(super.getControlData()) {</span>
						@Override
						public Object getValue() {
<span class="nc" id="L73">							return new PlanDiagram.Source(((Source) super.getValue()).getPlan());</span>
						}
					};
				}
			}) {
				private static final long serialVersionUID = 1L;

				@Override
				protected void updateExternalComponentsOnInternalEvents() {
<span class="fc" id="L82">				}</span>

				@Override
				protected void updateInternalComponentsOnExternalEvents() {
<span class="fc" id="L86">				}</span>

				@Override
				protected void refreshElementObjects() {
<span class="fc" id="L90">				}</span>

<span class="fc" id="L92">			}.createActionPalette(JTabbedPane.TOP, JTabbedPane.RIGHT, BoxLayout.Y_AXIS));</span>
<span class="fc" id="L93">			SwingUtilities.invokeLater(new Runnable() {</span>
				@Override
				public void run() {
<span class="fc" id="L96">					PlanDiagramPalette.this.refreshUI(true);</span>
<span class="fc" id="L97">				}</span>
			});
		}
<span class="fc" id="L100">		return true;</span>
	}

	@Override
	public void validateControlData(ValidationSession session) throws Exception {
<span class="nc" id="L105">	}</span>

	@Override
	public void addMenuContributions(MenuModel menuModel) {
<span class="nc" id="L109">	}</span>

	@Override
	public boolean requestCustomFocus() {
<span class="nc" id="L113">		return false;</span>
	}

	@Override
	public boolean isModificationStackManaged() {
<span class="nc" id="L118">		return false;</span>
	}

	@Override
	public boolean areValueAccessErrorsManaged() {
<span class="nc" id="L123">		return false;</span>
	}

	@Override
	public boolean displayError(Throwable error) {
<span class="nc" id="L128">		return false;</span>
	}

	public static class Source {
		private Plan plan;

<span class="nc" id="L134">		public Source(Plan plan) {</span>
<span class="nc" id="L135">			this.plan = plan;</span>
<span class="nc" id="L136">		}</span>

		public Plan getPlan() {
<span class="nc" id="L139">			return plan;</span>
		}

	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span>j-enterprise-service-bus (java8) (Dec 1, 2025 10:13:41 AM)</div></body></html>