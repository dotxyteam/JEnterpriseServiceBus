<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>ExtractCustomizationsHelp.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">j-enterprise-service-bus (java8) (Dec 1, 2025 10:13:41 AM)</a> &gt; <a href="../../index.html" class="el_group">custom-ui</a> &gt; <a href="../index.html" class="el_bundle">unpackaged-src</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">ExtractCustomizationsHelp.java</span></div><h1>ExtractCustomizationsHelp.java</h1><pre class="source lang-java linenums">
import java.lang.reflect.Field;
import java.util.Arrays;

import xy.reflect.ui.control.swing.customizer.CustomizationTools;
import xy.reflect.ui.control.swing.customizer.CustomizationToolsUI;
import xy.reflect.ui.control.swing.customizer.SwingCustomizer;
import xy.reflect.ui.info.custom.InfoCustomizations.EnumerationCustomization;
import xy.reflect.ui.info.custom.InfoCustomizations.FieldCustomization;
import xy.reflect.ui.info.custom.InfoCustomizations.ListCustomization;
import xy.reflect.ui.info.custom.InfoCustomizations.MethodCustomization;
import xy.reflect.ui.info.custom.InfoCustomizations.TypeCustomization;
import xy.reflect.ui.info.field.MembersCapsuleFieldInfo;
import xy.reflect.ui.info.field.IFieldInfo;
import xy.reflect.ui.info.type.ITypeInfo;
import xy.reflect.ui.info.type.source.JavaTypeInfoSource;
import xy.reflect.ui.util.ReflectionUIError;

<span class="nc" id="L19">public class ExtractCustomizationsHelp {</span>

<span class="nc" id="L21">	private static boolean namesElseCaptions = true;</span>

	public static void main(String[] args) throws Exception {
<span class="nc" id="L24">		CustomizationTools tools = SwingCustomizer.getDefault().getCustomizationTools();</span>
<span class="nc" id="L25">		CustomizationToolsUI toolsUI = tools.getToolsUI();</span>
<span class="nc bnc" id="L26" title="All 2 branches missed.">		for (Class&lt;?&gt; c : Arrays.asList(TypeCustomization.class, FieldCustomization.class, MethodCustomization.class,</span>
<span class="nc" id="L27">				ListCustomization.class, EnumerationCustomization.class)) {</span>
<span class="nc" id="L28">			ITypeInfo typeCustomizationType = toolsUI.getTypeInfo(new JavaTypeInfoSource(c, null));</span>
<span class="nc" id="L29">			printTypeHelp(typeCustomizationType);</span>
		}
<span class="nc" id="L31">	}</span>

	private static void printTypeHelp(ITypeInfo typeCustomizationType) throws Exception {
<span class="nc bnc" id="L34" title="All 2 branches missed.">		String title = (namesElseCaptions ? Class.forName(typeCustomizationType.getName()).getSimpleName()</span>
<span class="nc" id="L35">				: typeCustomizationType.getCaption());</span>
<span class="nc" id="L36">		System.out.println(&quot;&lt;H3&gt;&quot; + title + &quot;&lt;/H3&gt;&quot;);</span>
<span class="nc bnc" id="L37" title="All 2 branches missed.">		if (typeCustomizationType.getOnlineHelp() != null) {</span>
<span class="nc" id="L38">			System.out.println(typeCustomizationType.getOnlineHelp());</span>
		}
<span class="nc" id="L40">		System.out.println(&quot;&lt;UL&gt;&quot;);</span>
<span class="nc bnc" id="L41" title="All 2 branches missed.">		for (IFieldInfo field : typeCustomizationType.getFields()) {</span>
<span class="nc" id="L42">			printFieldHelp(field);</span>
		}
<span class="nc" id="L44">		System.out.println(&quot;&lt;/UL&gt;&quot;);</span>
<span class="nc" id="L45">	}</span>

	private static void printFieldHelp(IFieldInfo field) throws Exception {
<span class="nc bnc" id="L48" title="All 2 branches missed.">		if (field.getOnlineHelp() != null) {</span>
<span class="nc bnc" id="L49" title="All 2 branches missed.">			if (field.getCaption().trim().length() &gt; 0) {</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">				String title = (namesElseCaptions ? field.getName() : field.getCaption());</span>
<span class="nc" id="L51">				System.out.println(&quot;&lt;LI&gt;&quot; + &quot;&lt;B&gt;&quot; + title + &quot;: &quot; + &quot;&lt;/B&gt;&quot; + field.getOnlineHelp() + &quot;&lt;/LI&gt;&quot;);</span>
			}
<span class="nc" id="L53">		} else {</span>
<span class="nc" id="L54">			MembersCapsuleFieldInfo capsuleField = getCapsuleField(field);</span>
<span class="nc bnc" id="L55" title="All 2 branches missed.">			if (capsuleField != null) {</span>
<span class="nc bnc" id="L56" title="All 2 branches missed.">				for (IFieldInfo subField : capsuleField.getType().getFields()) {</span>
<span class="nc" id="L57">					printFieldHelp(subField);</span>
				}
			}
		}
<span class="nc" id="L61">	}</span>

	private static MembersCapsuleFieldInfo getCapsuleField(IFieldInfo field) {
		while (true) {
			try {
<span class="nc" id="L66">				field = (IFieldInfo) getInaccesibleFieldValue(field.getClass(), field, &quot;base&quot;);</span>
<span class="nc" id="L67">			} catch (Exception e) {</span>
<span class="nc" id="L68">				break;</span>
			}
<span class="nc bnc" id="L70" title="All 2 branches missed.">			if (field instanceof MembersCapsuleFieldInfo) {</span>
<span class="nc" id="L71">				return (MembersCapsuleFieldInfo) field;</span>
			}
<span class="nc bnc" id="L73" title="All 2 branches missed.">			if (field == null) {</span>
				break;
			}
		}
<span class="nc" id="L77">		return null;</span>
	}

	public static Object getInaccesibleFieldValue(Class&lt;?&gt; clazz, Object obj, String fieldName) {
		try {
			Field field;
			while (true) {
				try {
<span class="nc" id="L85">					field = clazz.getDeclaredField(fieldName);</span>
<span class="nc" id="L86">					break;</span>
<span class="nc" id="L87">				} catch (NoSuchFieldException e) {</span>
<span class="nc" id="L88">					clazz = clazz.getSuperclass();</span>
<span class="nc bnc" id="L89" title="All 2 branches missed.">					if (clazz == null) {</span>
<span class="nc" id="L90">						throw e;</span>
					}
				}
			}
<span class="nc" id="L94">			field.setAccessible(true);</span>
<span class="nc" id="L95">			return field.get(obj);</span>
<span class="nc" id="L96">		} catch (Exception e) {</span>
<span class="nc" id="L97">			throw new ReflectionUIError(e);</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span>j-enterprise-service-bus (java8) (Dec 1, 2025 10:13:41 AM)</div></body></html>